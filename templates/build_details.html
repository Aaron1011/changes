{% extends "layout.html" %}

{% block content %}
	<div id="overvei">
		<div class="page-header build-header status-{{ build.result }}">
			<span class="indicator">{{ build.result }}</span>
			<h2>{{ build.label }} <small>({{ build.parent_revision.sha[:12] }})</small></h2>
		</div>

		<dl class="flat">
			{% if build.author %}
				<dt>Author:</dt>
				<dd>{{ build.author.name }} (<a href="mailto:{{ build.author.email }}">{{ build.author.email }}</a>)</dd>
			{% end %}
			<dt>Project:</dt>
			<dd><a href="#">{{ project.name }}</a></dd>
			<dt>Duration:</dt>
			<dd>
				{% if build.duration %}
					{{ '%.2f' % (build.duration / 1000.0) }}s
				{% else %}
					n/a
				{% end %}
			</dd>
		</dl>

		<pre>{% raw linkify(escape(build.parent_revision.message)) %}</pre>

		<br>

		<ul class="phase-list nav nav-justified nav-tabs">
			{% for phase in build.phases %}
				<li class="status-{{ phase.result }}">
					<a href="#">{{ phase.label }}</a>
				</li>
			{% end %}
		</ul>

	</div>

	<br>

	<div id="test-results">
		<div class="page-header">
			<h3>Test Results <small>{{ sum(1 for t in test_list if t.result.name == 'failed') }} failure(s)</small></h3>
		</div>

		<table class="test-results table">
			<tbody>
				{% for test in test_list %}
					<tr class="status-{{ test.result }}">
						<td>{{ test.label }}</td>
						<td>
							{% if test.duration %}
								{{ '%.2f' % (test.duration / 1000.0) }}s
							{% else %}
								n/a
							{% end %}
						</td>
					</tr>
				{% end %}
			</tbody>
		</table>

	</div>
{% end %}
